# API マニュアル

## 利用方法

### **エンドポイント**

> [https://app.cotogoto.ai/webapi/](https://app.cotogoto.ai/webapi/)

### **利用回数**

1日1000回までリクエストができます。

### **認証**

登録時に発行されたConsumer Key(App Key)をリクエスト時に付与することで利用できます。

### **レスポンスコードとエラーコード**

この API では HTTP レスポンスのステータスコードとレスポンスボディのJSON によって「成功」「失敗」を通知します。 この API が返すレスポンスコードとエラーコードを以下に示します。

| レスポンス コード | 意味                    |
| --------- | --------------------- |
| 200       | 成功。                   |
| 400       | 送信されたJSONの解析/変換に失敗した。 |
| 404       | クラス/メソッドが見つからない。      |
| 500       | その他の例外が発生した。          |

| エラーコード | メッセージ                    | 意味                                    |
| ------ | ------------------------ | ------------------------------------- |
| 10     | parameter is required    | パラメータが設定されていません。                      |
| 20     | Invalid or expired token | 無効または有効期限が切れたConsumer Key(App Key)です。 |
| 21     | Rate limit exceeded      | このリクエストに対する制限は利用限度に達しています。            |

## 会話

### URI

> GET /noby.json

### リクエスト

| パラメータ   | 説明                                                                             | 初期値 | 設定 |
| ------- | ------------------------------------------------------------------------------ | --- | -- |
| appkey  | 登録時に発行したConsumer Key(APIキー)を設定します。                                             | -   | 必須 |
| mail    | <p>コトゴトのログイン時のメールアドレスを設定します。<br>※個人での利用する場合のみに限定してください。</p>                    | -   | 任意 |
| pass    | <p>コトゴトのログイン時のパスワートを設定します。<br>※個人での利用する場合のみに限定してください。</p>                      | -   | 任意 |
| token   | <p>コトゴトにログインしてからアカウント設定のAPIトークンを設定します。</p><p>※個人での利用する場合のみに限定してください。</p>       | -   | 任意 |
| text    | 会話の文章を設定します。                                                                   | -   | 必須 |
| lat     | 緯度。コトゴトのチェックイン機能を利用します。                                                        | -   | 任意 |
| lng     | 経度。コトゴトのチェックイン機能を利用します。                                                        | -   | 任意 |
| study   | <p>会話時の学習の有無を選択します。<br>「0:無」,「1:有」</p>                                         | 1   | 任意 |
| persona | <p>人工知能の人格を選択します。<br>「0:ノーマル(女)」,「1:ツンデレ(女)」,「2:ツンデレ(男)」,「3:神」,「4:ノーマル(男)」</p> | 0   | 任意 |
| ending  | <p>語尾を設定します。<br>例:のじゃ、だっちゃ 等</p>                                               | -   | 任意 |

※メールやAPIトークンを利用する場合、コトゴトの機能連携ができるようになり、作業開始や終了の作業ログやモチベーションの管理がサービス内で行えるようになります。

### **レスポンス**

| パラメータ親       | パラメータ子      | 説明                                                            |
| ------------ | ----------- | ------------------------------------------------------------- |
| commandId    | -           | コマンドIDを返します。                                                  |
| commandName  | -           | コマンド名を返します。                                                   |
| text         | -           | 会話の返事を返します。                                                   |
| type         | -           | 会話の返事タイプを返します。 (コマンド・あいさつ・係り受け・マルコフ連鎖・パターン・テンプレート・ランダム・あいづち等) |
| mood         | -           | 会話のムードを返します。                                                  |
| negaposi     | -           | ネガポジ(ネガティブ -3 <---> 3 ポジティブ)を返します。                            |
| negaposiList | word        | ネガポジの単語を返します。                                                 |
|              | score       | ネガポジのスコア(ネガティブ -3 <---> 3 ポジティブ)を返します。                        |
| emotion      | angerFear   | 感情のスコア(怖れ -3 <---> 3 怒り)を返します。                                |
|              | joySad      | 感情のスコア(悲しい -3 <---> 3 嬉しい)を返します。                              |
|              | likeDislike | 感情のスコア(嫌い -3 <---> 3 好ましい)を返します。                              |
| emotionList  | word        | 感情の単語を返します。                                                   |
|              | angerFear   | 感情のスコア(怖れ -3 <---> 3 怒り)を返します。                                |
|              | joySad      | 感情のスコア(悲しい -3 <---> 3 嬉しい)を返します。                              |
|              | likeDislike | 感情のスコア(嫌い -3 <---> 3 好ましい)を返します。                              |
| wordList     | feature     | 形態素の全情報を文字列で返します。                                             |
|              | start       | 形態素の開始位置を返します。                                                |
|              | surface     | 形態素の表記を返します。                                                  |
| art          | -           | 固有表現(人工物名)を返します。                                              |
| org          | -           | 固有表現(組織名)を返します。                                               |
| psn          | -           | 固有表現(人名)を返します。                                                |
| loc          | -           | 固有表現(地名)を返します。                                                |
| dat          | -           | 固有表現(日付表現)を返します。                                              |
| tim          | -           | 固有表現(時刻表現)を返します。                                              |

## AIとの会話のコツ

AIと会話する場合、キーワードが該当すると使える機能を以下で説明しています。

{% hint style="info" %}
[https://docs.cotogoto.ai/talk](https://docs.cotogoto.ai/talk)
{% endhint %}
